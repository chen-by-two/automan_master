{"name": "test_zjc_CustomerPaging_001", "status": "broken", "statusDetails": {"message": "KeyError: 'token'", "trace": "self = <test_assistantappKwCases.Test_assistantapp object at 0x7fe4bb50ad90>\n\n    @allure.feature(\"客户管理-查询客户\")\n    @allure.severity(\"blocker\")\n    def test_zjc_CustomerPaging_001(self):\n    \t# 读取yaml文件\n    \tyamlFile = ckw.CommonKeyWord().Yaml_Read(\"/Users/zoudw/PycharmProjects/automan/testFile/ZhangJunChao/zjctest.yaml\")\n    \t# 读取yaml里手机号\n    \tmobile = ckw.CommonKeyWord().Yaml_GetByKey(yamlFile,\"mobileAssistant\")\n    \t# 读取Yaml执行环节\n    \tenv = ckw.CommonKeyWord().Yaml_GetByKey(yamlFile,\"env\")\n    \t# 登录发送验证码\n    \tbkw.assistantappApi_CodeSend({\"header\":{\"Content-Type\": \"application/json;charsetUTF-8\",\"Authorization\":\"Bearer\"},\"parma\":{},\"data\":{\"type\":\"login\",\"mobile\":mobile},\"env\":env},\"dict\")\n    \t# 从数据库提取验证码-获取原始sql\n    \ttmpSql = ckw.CommonKeyWord().Yaml_GetByKey(yamlFile,\"getLoginCaptcha\")\n    \t# 从数据库提取验证码-修改sql where条件\n    \tfinSql = ckw.CommonKeyWord().Str_Replace(tmpSql,18099990000,mobile)\n    \t# 打印sql到控制台\n    \tckw.CommonKeyWord().Print_ToControl(\"sql:\",finSql)\n    \t# 打印sql到日志\n    \tckw.CommonKeyWord().Print_ToLog(\"sql:\",finSql)\n    \t# 从数据库提取验证码-执行查询\n    \tsqlRes = ckw.CommonKeyWord().Db_MysqlSelect({\"host\":\"udtest.uniondrug.com\",\"port\":\"6033\",\"username\":\"test\",\"password\":\"tset@321abc\",\"database\":\"cn_uniondrug_module_data\",\"sql\":finSql})\n    \t# 打印查询结果到控制台\n    \tckw.CommonKeyWord().Print_ToControl(\"sql查询结果：\",sqlRes)\n    \t# 打印查询结果到日志\n    \tckw.CommonKeyWord().Print_ToLog(\"sql查询结果：\",sqlRes)\n    \t# 从数据库提取验证码-提取验证码01\n    \tcaptcha = ckw.CommonKeyWord().Json_GetJsonValue(sqlRes[0],[[\"captcha\"]])\n    \t# 打印验证码到控制台\n    \tckw.CommonKeyWord().Print_ToControl(\"验证码：\",captcha)\n    \t# 打印验证码到日志\n    \tckw.CommonKeyWord().Print_ToLog(\"验证码：\",captcha)\n    \t# 登录获取token-调取接口\n    \tloginRes = bkw.assistantappApi_UserSmsLogin({\"header\":{\"Content-Type\": \"application/json;charsetUTF-8\"},\"parma\":{},\"data\":{\"mobile\":mobile,\"code\":captcha},\"env\":env},\"dict\")\n    \t# 登录获取token-提取token\n>   \ttoken = ckw.CommonKeyWord().Json_GetJsonValue(loginRes,[[\"data\",\"token\"]])\n\ntestCase/assistantapp/test_assistantappKwCases.py:43: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nKeyWordDriver/CommonKeyWord.py:73: in Json_GetJsonValue\n    return jsonTools.getJsonValue(jsonDict, k)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\njsonDict = {'data': {}, 'dataType': 'ERROR', 'errno': '280016', 'error': '验证码校验失败'}\nk = [['data', 'token']]\n\n    def getJsonValue(jsonDict, k):\n        value = None\n        if type(jsonDict) == str:\n            jsonDict = eval(jsonDict)\n        for key in k:\n            if key.__len__() == 1:\n                value = jsonDict[key[0]]\n            if key.__len__() == 2:\n>               value = jsonDict[key[0]][key[1]]\nE               KeyError: 'token'\n\nCommon/JsonTools.py:24: KeyError"}, "attachments": [{"name": "log", "source": "f07360a4-6272-4ddf-98e1-21f43f66a158-attachment.txt", "type": "text/plain"}], "start": 1621567407364, "stop": 1621567408269, "uuid": "18c9c620-6677-4d76-a636-20553aa6def3", "historyId": "23ded4eeb6968522d712c2e9b8e8c871", "testCaseId": "9fc8c33ca781418bccdc19be13dc4eef", "fullName": "testCase.assistantapp.test_assistantappKwCases.Test_assistantapp#test_zjc_CustomerPaging_001", "labels": [{"name": "severity", "value": "blocker"}, {"name": "feature", "value": "客户管理-查询客户"}, {"name": "parentSuite", "value": "testCase.assistantapp"}, {"name": "suite", "value": "test_assistantappKwCases"}, {"name": "subSuite", "value": "Test_assistantapp"}, {"name": "host", "value": "localhost"}, {"name": "thread", "value": "6015-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testCase.assistantapp.test_assistantappKwCases"}]}